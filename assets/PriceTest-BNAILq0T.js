import{r as a,u as f,j as e,E as b}from"./index-vcGGyp0O.js";import{d as l}from"./dayjs.min-CvGDO_bq.js";import{M as v}from"./MealPriceChart-CSCiuBIT.js";import"./index-CktTJxEi.js";function D(){const[t,i]=a.useState(l().format("YYYY-MM")),[n,o]=a.useState(l().format("YYYY-MM-DD")),[d,g]=a.useState(""),[m,h]=a.useState(""),[p,u]=a.useState(""),{user:r}=f();async function y(){h(""),u("");try{await b.post("/admin/price-change",{value:Number(d),date:n}),h("Saved!");const s=n.slice(0,7);s!==t&&i(s)}catch(s){u(s?.response?.data?.error||"Failed")}}function x(s){const c=l(n).add(s,"day");o(c.format("YYYY-MM-DD"))}function j(s){const c=l(t+"-01").add(s,"month");i(c.format("YYYY-MM"))}return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card",style:{maxWidth:800,margin:"20px auto"},children:[e.jsx("h2",{style:{marginTop:0},children:"Meal Price Graph Tester"}),e.jsxs("div",{className:"grid cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Month"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{className:"btn",onClick:()=>j(-1),children:"<"}),e.jsx("input",{className:"input",type:"month",value:t,onChange:s=>i(s.target.value),style:{maxWidth:180}}),e.jsx("button",{className:"btn",onClick:()=>j(1),children:">"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Change price (admin only)"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr auto",gap:8},children:[e.jsx("input",{className:"input",type:"date",value:n,onChange:s=>o(s.target.value)}),e.jsx("input",{className:"input",type:"number",placeholder:"meal price (à§³)",value:d,onChange:s=>g(s.target.value)}),e.jsx("button",{className:"btn teal",onClick:y,disabled:!r||r.role!=="admin",children:"Apply"})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsx("button",{className:"btn",onClick:()=>x(-1),children:"-1 day"}),e.jsx("button",{className:"btn",onClick:()=>x(1),children:"+1 day"})]}),!r&&e.jsx("p",{className:"desc",children:"Login as admin to apply changes."}),p&&e.jsx("p",{style:{color:"crimson"},children:p}),m&&e.jsx("p",{style:{color:"seagreen"},children:m})]})]}),e.jsx("div",{style:{marginTop:12},children:e.jsx(v,{month:t})})]})})}export{D as default};
