import{r as a,u as v,j as e,E as N}from"./index-C6amH96Z.js";import{d as r}from"./dayjs.min-BvDu5yAK.js";import{M as Y}from"./MealPriceChart-BwixEbda.js";import"./index-rN_JU_NL.js";function T(){const[n,i]=a.useState(r().format("YYYY-MM")),[l,o]=a.useState(r().format("YYYY-MM-DD")),[d,g]=a.useState(""),[m,h]=a.useState(""),[p,u]=a.useState(""),[y,f]=a.useState(0),{user:c}=v();async function b(){h(""),u("");try{await N.post("/admin/price-change",{value:Number(d),date:l}),h("Saved!");const s=l.slice(0,7);s!==n&&i(s),f(t=>t+1)}catch(s){u(s?.response?.data?.error||"Failed")}}function x(s){const t=r(l).add(s,"day");o(t.format("YYYY-MM-DD"))}function j(s){const t=r(n+"-01").add(s,"month");i(t.format("YYYY-MM"))}return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card",style:{maxWidth:800,margin:"20px auto"},children:[e.jsx("h2",{style:{marginTop:0},children:"Meal Price Graph Tester"}),e.jsxs("div",{className:"grid cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Month"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{className:"btn",onClick:()=>j(-1),children:"<"}),e.jsx("input",{className:"input",type:"month",value:n,onChange:s=>i(s.target.value),style:{maxWidth:180}}),e.jsx("button",{className:"btn",onClick:()=>j(1),children:">"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Change price (admin only)"}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr auto",gap:8},children:[e.jsx("input",{className:"input",type:"date",value:l,onChange:s=>o(s.target.value)}),e.jsx("input",{className:"input",type:"number",placeholder:"meal price (à§³)",value:d,onChange:s=>g(s.target.value)}),e.jsx("button",{className:"btn teal",onClick:b,disabled:!c||c.role!=="admin",children:"Apply"})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsx("button",{className:"btn",onClick:()=>x(-1),children:"-1 day"}),e.jsx("button",{className:"btn",onClick:()=>x(1),children:"+1 day"})]}),!c&&e.jsx("p",{className:"desc",children:"Login as admin to apply changes."}),p&&e.jsx("p",{style:{color:"crimson"},children:p}),m&&e.jsx("p",{style:{color:"seagreen"},children:m})]})]}),e.jsx("div",{style:{marginTop:12},children:e.jsx(Y,{month:n,refresh:y})})]})})}export{T as default};
